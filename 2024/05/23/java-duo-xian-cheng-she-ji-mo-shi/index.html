<!DOCTYPE html><html lang="zh-CN"><head><!-- hexo injector head_begin start --><style type="text/css">.douban-card-block {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    max-height: 400px;
}

.douban-card {
    display: flex;
    margin: 30px 10px;
    padding: 15px;
    border-radius: 15px;
    position: relative;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    color: antiquewhite;
    text-decoration: none;
}

.douban-card:hover {
    text-decoration: none;
}

.douban-card-bgimg {
    position: absolute;
    width: 115%;
    height: 115%;
    filter: blur(15px) brightness(0.6);
    background-size: 100%;
    background-position: center;
    background-repeat: no-repeat;
}

.douban-card-img {
    position: relative;
    height: 130px;
    width: 80px;
    background-size: 100%;
    background-position: center;
    background-repeat: no-repeat;
}

.douban-card-left:hover .douban-card-img {
    filter: blur(5px) brightness(0.6);
    transform: perspective(800px) rotateX(180deg);
}

.douban-card-left .douban-card-img {
    transition: all 500ms ease;
}

.douban-card-left {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.douban-card-left .douban-card-status {
    height: 130px;
    width: 80px;
    text-align: center;
    font-weight: bold;
    position: absolute;
    left: 0;
    top: 30%;
    transform: rotateX(180deg);
    backface-visibility: hidden;
    transition: all 500ms ease;
}

.douban-card-left:hover .douban-card-status {
    transform: perspective(800px) rotateX(0deg);
}

.douban-card-right {
    position: relative;
    display: flex;
    flex-direction: column;
    margin-left: 12px;
    font-size: 16px;
    font-family: "Courier New", Courier, monospace;
    line-height: 1.3;
    color: antiquewhite;
}

.douban-card-item {
    margin-top: 4px;
}
</style><!-- hexo injector head_begin end --><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="ç¼–ç¨‹è·¯ä¸Šçš„éšç¬”"><title>Javaå¤šçº¿ç¨‹è®¾è®¡æ¨¡å¼ | LuoZero's World</title><link rel="preload" href="/Blog/CangEr.woff2" as="font" type="font/woff2" crossorigin><style>@font-face {
  font-family: "Cang Er";
  src: url('/Blog/CangEr.woff2') format('woff2');
}
</style><link rel="stylesheet" type="text/css" href="/Blog/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="https://unpkg.com/normalize.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/pure-min.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="https://unpkg.com/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/Blog/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/Blog/favicon.ico"><link rel="apple-touch-icon" href="/Blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/Blog/apple-touch-icon.png"><script type="text/javascript" src="https://unpkg.com/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="https://unpkg.com/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="https://unpkg.com/toastr/build/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 7.3.0"><link rel="stylesheet" href="/Blog/css/prism-ghcolors.css" type="text/css">
<link rel="stylesheet" href="/Blog/css/prism-line-numbers.css" type="text/css"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Javaå¤šçº¿ç¨‹è®¾è®¡æ¨¡å¼</h1><a id="logo" href="/Blog/.">LuoZero's World</a><p class="description">å’Œå…‰åŒå°˜,ä¸æ—¶èˆ’å·</p></div><div id="nav-menu"><a class="current" href="/Blog/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/Blog/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/Blog/about/"><i class="fa fa-user"> å…³äº</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Javaå¤šçº¿ç¨‹è®¾è®¡æ¨¡å¼</h1><div class="post-meta">2024-05-23<span> | </span><span class="category"><a href="/Blog/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">æŠ€æœ¯æ€»ç»“</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 2.4k</span><span class="post-meta-item-text"> å­—</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 9</span><span class="post-meta-item-text"> åˆ†é’Ÿ</span></span></span></div><a class="disqus-comment-count" href="/Blog/2024/05/23/java-duo-xian-cheng-she-ji-mo-shi/#waline"><span class="waline-comment-count" id="/Blog/2024/05/23/java-duo-xian-cheng-she-ji-mo-shi/"></span><span> æ¡è¯„è®º</span></a><div class="post-content"><h3 id="å¤šçº¿ç¨‹è¯„ä»·æ ‡å‡†"><a href="#å¤šçº¿ç¨‹è¯„ä»·æ ‡å‡†" class="headerlink" title="å¤šçº¿ç¨‹è¯„ä»·æ ‡å‡†"></a>å¤šçº¿ç¨‹è¯„ä»·æ ‡å‡†</h3><ul>
<li><p><strong>å®‰å…¨æ€§</strong>â€”â€”ä¸æŸåå¯¹è±¡	&#x3D;&#x3D;ã€å¿…é¡»ã€‘&#x3D;&#x3D;</p>
</li>
<li><p><strong>ç”Ÿå­˜æ€§&#x2F;æ´»æ€§</strong>â€”â€”å¿…è¦çš„å¤„ç†èƒ½å¤Ÿè¢«æ‰§è¡Œ	&#x3D;&#x3D;ã€å¿…é¡»ã€‘&#x3D;&#x3D;</p>
</li>
<li><p><strong>å¯å¤ç”¨æ€§</strong>â€”â€”ç±»å¯é‡å¤åˆ©ç”¨ï¼Œe.g. JUC</p>
</li>
<li><p><strong>æ€§èƒ½</strong>â€”â€”èƒ½å¿«é€Ÿã€å¤§æ‰¹é‡å¤„ç†ï¼šååé‡ã€å“åº”æ€§ã€å®¹é‡</p>
</li>
</ul>
<h3 id="I-Single-Threaded-Executionæ¨¡å¼"><a href="#I-Single-Threaded-Executionæ¨¡å¼" class="headerlink" title="I.Single Threaded Executionæ¨¡å¼"></a>I.Single Threaded Executionæ¨¡å¼</h3><p>è¯¥æ¨¡å¼ä¼šå°†ä¿®æ”¹æˆ–å¼•ç”¨å®ä¾‹çŠ¶æ€çš„åœ°æ–¹è®¾ç½®ä¸º<strong>ä¸´ç•ŒåŒº</strong>ï¼Œç”¨äºå®ç°å¯¹ä¸´ç•Œèµ„æºçš„ä¿æŠ¤ï¼Œå³ç¡®ä¿åŒä¸€æ—¶é—´å†…åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå¤„ç†ã€‚ä½¿ç”¨æ—¶åº”ç¡®å®š<strong>ä¿æŠ¤å¯¹è±¡</strong>ã€<strong>ä»¥ä»€ä¹ˆå•ä½ä¿æŠ¤</strong>ã€<strong>ä½¿ç”¨å“ªä¸ªé”ä¿æŠ¤</strong></p>
<blockquote>
<p>synchronized</p>
</blockquote>
<p> <code>char</code> <code>int</code> ç­‰åŸºæœ¬ç±»å‹ï¼Œä»¥åŠå¯¹è±¡ç­‰å¼•ç”¨ç±»å‹çš„<strong>è¯»å†™æ“ä½œ</strong>æ˜¯åŸå­çš„ï¼Œè€Œ<code>long</code> <code>double</code>åœ¨32ä½JVMä¸Šçš„è¯»å†™ä¸æ˜¯åŸå­çš„, è€Œåœ¨64ä½JVMä¸Šæ˜¯åŸå­çš„</p>
<blockquote>
<p>JUC-Semaphore</p>
</blockquote>
<p>å½“æˆ‘ä»¬æƒ³è¦ç¡®ä¿æŸä¸ªåŒºåŸŸâ€œæœ€å¤šåªèƒ½ç”±Nä¸ªçº¿ç¨‹â€æ‰§è¡Œï¼Œå°±éœ€è¦ç”¨<strong>è®¡æ•°ä¿¡å·é‡</strong>æ¥æ§åˆ¶</p>
<br/>

<p><strong>è¯¾åä¹ é¢˜</strong></p>
<ol>
<li><p>åœ¨<strong>Single Threaded Execution</strong> æ¨¡å¼ä¸­ï¼Œæ»¡è¶³ä¸‹è¿°æ¡ä»¶æ—¶ï¼Œæ­»é”ä¾¿ä¼šå‘ç”Ÿï¼š</p>
<ul>
<li>å­˜åœ¨å¤šä¸ª<code>SharedResource</code>è§’è‰²</li>
<li>è¯·æ±‚å’Œä¿æŒã€ä¸å¯å‰¥å¤º</li>
<li>è·å–<code>SharedResouce</code>è§’è‰²çš„é”çš„é¡ºåºä¸å›ºå®šï¼ˆå¾ªç¯ç­‰å¾…ï¼‰</li>
</ul>
<p>é‚£ä¹ˆæˆ‘ä»¬ç ´åä»»ä¸€æ¡ä»¶ä¾¿å¯é˜²æ­¢æ­»é”å‘ç”Ÿï¼Œè€ƒè™‘<strong>å“²å­¦å®¶è¿›é¤é—®é¢˜</strong>ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰å¦‚ä¸‹çš„è§£å†³æ€è·¯ï¼š</p>
<ul>
<li>å°†ç­·å­<strong>æ‰“åŒ…</strong>ï¼Œä»¥åŒ…ä½œä¸ºç«äº‰å•ä½ã€‚</li>
<li>æ¯ä¸ªäººéƒ½æŒ‰ç…§ ç­·1 -&gt; ç­·2 â€¦ çš„é¡ºåºç«äº‰ã€‚</li>
</ul>
<p>å¾ªç¯ç­‰å¾…çš„å‰æä¾¿æ˜¯æœ‰å¤šä¸ªèµ„æºï¼Œå³æ¡ä»¶ä¸‰çš„å‰ææ˜¯æ¡ä»¶ä¸€</p>
</li>
</ol>
<br/>

<h3 id="II-Immutable"><a href="#II-Immutable" class="headerlink" title="II.Immutable"></a>II.Immutable</h3><p>è¯¥æ¨¡å¼æ—¨åœ¨ä½¿ç”¨<strong>ç¡®ä¿å®ä¾‹çŠ¶æ€ä¸ä¼šå‘ç”Ÿæ”¹å˜çš„ç±»</strong>ï¼Œè¿™æ ·åœ¨è®¿é—®è¿™äº›å®ä¾‹å˜é‡æ—¶æ— é¡»æ‰§è¡Œäº’æ–¥å¤„ç†ï¼Œæ•…è€Œå¯ä»¥æé«˜æ€§èƒ½</p>
<blockquote>
<p>ä½•æ—¶ä½¿ç”¨Immutable</p>
</blockquote>
<ul>
<li>å®ä¾‹åˆ›å»ºåï¼ŒçŠ¶æ€ä¸å†å‘ç”Ÿæ”¹å˜</li>
<li>å®ä¾‹æ˜¯å…±äº«çš„ï¼Œä¸”è¢«é¢‘ç¹è®¿é—®</li>
</ul>
<blockquote>
<p>è€ƒè™‘æˆå¯¹çš„mutableå’Œimmutable</p>
</blockquote>
<p>ä¸ºæé«˜æ€§èƒ½ï¼Œå°†ç±»åˆ†ä¸º<code>mutable</code>å’Œ<code>immutable</code>ä¸¤ç§å®ç°ï¼›e.g. <code>String</code>å’Œ<code>StringBuffer</code></p>
<br/>

<h3 id="III-Guarded-Suspension"><a href="#III-Guarded-Suspension" class="headerlink" title="III.Guarded Suspension"></a>III.Guarded Suspension</h3><p>è¯¥æ¨¡å¼ç±»ä¼¼äºâ€œé™„åŠ <strong>æ¡ä»¶</strong>çš„<code>synchronized</code>â€æ¨¡å¼ï¼Œç›¸å½“äºåœ¨<code>Single Threaded Execution</code>æ¨¡å¼çš„åŸºç¡€ä¸Šå¼•å…¥äº†<strong>åŒæ­¥æœºåˆ¶</strong>ï¼šå³æ¶ˆè´¹è€…åº”è¯¥åœ¨é˜Ÿåˆ—ä¸ä¸ºç©ºæ˜¯æ‰èƒ½å–ï¼Œç”Ÿäº§è€…åœ¨é˜Ÿåˆ—ä¸æ»¡æ—¶æ‰èƒ½æ”¾</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¼ªä»£ç å®ç°</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GuardObject</span>&#123;</span><br><span class="line">    syn <span class="title function_">guardedMethod</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="keyword">while</span>(å®ˆæŠ¤æ¡ä»¶) wait();</span><br><span class="line">      ç›®æ ‡å¤„ç†</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    syn <span class="title function_">stateChangedMethod</span><span class="params">()</span>&#123;</span><br><span class="line">      ç›®æ ‡å¤„ç†</span><br><span class="line">      notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<p><strong>è¯¾åä¹ é¢˜</strong></p>
<ol>
<li><code>wait()</code> å’Œ <code>notifyAll()</code> æ“ä½œçš„éƒ½æ˜¯<code>this</code>çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œå’Œä½ <code>GuardObject</code>ä¸­çš„è‡ªå®šä¹‰å­—æ®µï¼ˆe.g. queueï¼‰æ¯«æ— å…³ç³»</li>
<li>åœ¨å®ç°<strong>åŒæ­¥æœºåˆ¶</strong>æ—¶ï¼Œå…·æœ‰å¯¹ç§°æ€§çš„ä»£ç å¾ˆæœ‰å¯èƒ½å¯¼è‡´æ­»é”ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¸å¦¨åŠ å…¥ä¸€ä¸ª<strong>ç§å­</strong>ï¼Œä»è€Œä¿è¯ä»£ç æ­£å¸¸è¿è¡Œ&#x2F;æ­£å¸¸ç»“æŸ</li>
</ol>
<br/>

<h3 id="IV-Balking"><a href="#IV-Balking" class="headerlink" title="IV.Balking"></a>IV.Balking</h3><p>è¯¥æ¨¡å¼ä¸<code>Guarded Suspension</code>æ¨¡å¼ç±»ä¼¼ï¼Œä¹Ÿå­˜åœ¨å®ˆæŠ¤æ¡ä»¶ã€‚ä½†è¯¥æ¨¡å¼ä¸‹å®ˆæŠ¤æ¡ä»¶ä¸æˆç«‹æ—¶ï¼Œåˆ™<strong>ç«‹åˆ»ä¸­æ–­è¿”å›</strong></p>
<blockquote>
<p>ä½¿ç”¨æ—¶æœº</p>
</blockquote>
<ul>
<li>å¹¶ä¸éœ€è¦æ‰§è¡Œï¼Œå› ä¸ºä¹‹å‰å·²ç»æ‰§è¡Œè¿‡äº†</li>
<li>è‹¥å®ˆæŠ¤æ¡ä»¶ä¸æˆç«‹ï¼Œæƒ³ç«‹å³è¿”å›å¹¶è¿›å…¥ä¸‹ä¸€æ­¥</li>
<li>å®ˆæŠ¤æ¡ä»¶ä»…åœ¨ç¬¬ä¸€æ¬¡æˆç«‹æ—¶</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¼ªä»£ç </span></span><br><span class="line"><span class="comment">//initializedå­—æ®µçŠ¶æ€ä»…å˜åŒ–ä¸€æ¬¡ï¼Œç§°ä¹‹ä¸ºã€é—­é”ã€‘</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GuardObject</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">initialized</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    syn <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(initialized) <span class="keyword">return</span>;   <span class="comment">//balking</span></span><br><span class="line">      å…·ä½“å¤„ç†</span><br><span class="line">      initialized = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¶…æ—¶ guarded timed</p>
</blockquote>
<p>ä»‹äº<code>Balking</code>å’Œ<code>Guarded Suspension</code>ï¼Œæˆ‘ä»¬é€‰æ‹©åœ¨å®ˆæŠ¤æ¡ä»¶æˆç«‹ä¹‹å‰ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœåˆ°æ—¶æ¡ä»¶è¿˜æœªæˆç«‹ï¼Œåˆ™ç›´æ¥<code>balk</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¼ªä»£ç </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GuardObject</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">ready</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">long</span> timeout;</span><br><span class="line">    </span><br><span class="line">    syn <span class="title function_">execute</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();  <span class="comment">//å¼€å§‹æ—¶é—´</span></span><br><span class="line">      <span class="keyword">while</span>(!ready)&#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">now</span> <span class="operator">=</span> System.currentTimeMillis();  <span class="comment">//å½“å‰æ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">rest</span> <span class="operator">=</span> timeout-(now-start);        <span class="comment">//å‰©ä½™æ—¶é—´</span></span><br><span class="line">        <span class="keyword">if</span>(rest &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TimeoutException</span>(<span class="string">&quot;...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        wait(rest);</span><br><span class="line">      &#125;</span><br><span class="line">      å…·ä½“å¤„ç†</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    syn <span class="title function_">setExecutable</span><span class="params">(<span class="type">boolean</span> on)</span>&#123;</span><br><span class="line">      ready = on;</span><br><span class="line">      notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="V-Producer-Consumer"><a href="#V-Producer-Consumer" class="headerlink" title="V.Producer-Consumer"></a>V.Producer-Consumer</h3><p>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ï¼Œå½“ä¸¤è€…åªæœ‰ä¸€ä¸ªæ—¶ï¼Œç§°ä¹‹ä¸º<code>pipe</code>æ¨¡å¼ã€‚è¯¥æ¨¡å¼çš„ç›®çš„æ˜¯è®©<strong>ç”Ÿäº§è€…å¯ä»¥å®‰å…¨åœ°å°†æ•°æ®äº¤ç»™æ¶ˆè´¹è€…</strong>ï¼Œæ•…è€Œå¼•å…¥ä¸€ä¸ªâ€œä¸­é—´è§’è‰²â€œï¼Œè´Ÿè´£çº¿ç¨‹åè°ƒè¿è¡Œ</p>
<p><strong>é‡è¦å¯ç¤ºï¼šçº¿ç¨‹åè°ƒè¿è¡Œéœ€è¦è€ƒè™‘â€æ”¾åœ¨ä¸­é—´çš„ä¸œè¥¿â€œï¼›ç°åœºäº’æ–¥å¤„ç†éœ€è¦è€ƒè™‘â€åº”è¯¥ä¿æŠ¤çš„ä¸œè¥¿â€œ</strong></p>
<blockquote>
<p>InterruptedException</p>
</blockquote>
<ul>
<li><code>sleep</code>ã€<code>join</code>çš„çº¿ç¨‹è¢«ä¸­æ–­ï¼Œç«‹é©¬åœ¨è¯¥çº¿ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸</li>
<li><code>wait</code>çš„çº¿ç¨‹è¢«ä¸­æ–­ï¼Œéœ€è¦åœ¨è¯¥çº¿ç¨‹é‡æ–°è·å–é”ä¹‹åæ‰ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆå³åœ¨<strong>å…¥å£é˜Ÿåˆ—</strong>ä¸­çš„çº¿ç¨‹ä¸ä¼šè¢«ä¸­æ–­ï¼‰</li>
<li><strong><code>interrupt</code>ä¸éœ€è¦è·å–çº¿ç¨‹çš„é”ï¼›<code>notify/notifyAll</code>éœ€è¦è·å–çº¿ç¨‹çš„é”</strong></li>
</ul>
<blockquote>
<p>JUC-BolckingQueue</p>
</blockquote>
<ul>
<li><code>ArrayBlockingQueue</code> <code>LinkedBlockingQueue</code></li>
<li><code>PriorityBlockingQueue</code></li>
<li><code>DelayQueue</code>ï¼šåœ¨å…ƒç´ æŒ‡å®šæ—¶é—´åˆ°æœŸåæ‰å¯ä»¥<code>take</code>ï¼Œåˆ°æœŸæ—¶é—´æœ€é•¿çš„å…ƒç´ å…ˆè¢«<code>take</code></li>
<li><code>SynchronousQueue</code>ï¼šç”¨äºæ‰§è¡Œ<code>Producer</code>è§’è‰²åˆ°<code>Consumer</code>è§’è‰²çš„<strong>ç›´æ¥ä¼ é€’</strong>ï¼Œå³æœ‰ä¸€æ–¹æ²¡å‡†å¤‡å¥½æ—¶ï¼Œå¦ä¸€æ–¹è°ƒç”¨æ¥å£ä¼šè¢«é˜»å¡</li>
</ul>
<blockquote>
<p>JUC-Exchanger</p>
</blockquote>
<p>ç”¨äºè®©ä¸¤ä¸ªçº¿ç¨‹å®‰å…¨åœ°äº¤æ¢å¯¹è±¡</p>
<br/>

<p><strong>è¯¾åä¹ é¢˜ï¼š</strong></p>
<ol>
<li>å¦‚ä½•å®ç° æ¸…é™¤â€œä¸­é—´è§’è‰²â€çš„æ‰€ç»´æŠ¤çš„æ•°æ®<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">syn <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span>&#123;</span><br><span class="line">    æ¸…é™¤æ“ä½œ...</span><br><span class="line">    notifyAll();    <span class="comment">//æ¸…é™¤å®Œè¦é€šçŸ¥æ‰€æœ‰ç­‰å¾…é˜Ÿåˆ—ä¸Šçš„çº¿ç¨‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<br/>

<h3 id="VI-Read-Write-Lock"><a href="#VI-Read-Write-Lock" class="headerlink" title="VI.Read-Write Lock"></a>VI.Read-Write Lock</h3><p>è¯»è€…å†™è€…æ¨¡å¼ï¼Œ<strong>å¯¹ä¸åŒç§ç±»çº¿ç¨‹çš„äº’æ–¥å¤„ç†åˆ†å¼€è€ƒè™‘</strong>ï¼šå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è¯»å–ï¼Œè¯»å–æ—¶ä¸èƒ½å†™å…¥ï¼›ä¸€ä¸ªçº¿ç¨‹å†™å…¥æ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½è¯»å–æˆ–å†™å…¥</p>
<p>è¯¥æ¨¡å¼é€‚ç”¨äº<strong>è¯»å–æ“ä½œç¹é‡</strong>ã€<strong>è¯»å–é¢‘ç‡æ¯”å†™å…¥é¢‘ç‡é«˜</strong>æ—¶çš„æƒ…å†µ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">ReadWriteLock</span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> <span class="variable">readingReaders</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> <span class="variable">waitingWriters</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> <span class="variable">writingWriters</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">preferWriter</span> <span class="operator">=</span> <span class="literal">true</span>;    <span class="comment">//é˜²æ­¢å†™çº¿ç¨‹â€œé¥¿æ­»â€</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">readLock</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException&#123;</span><br><span class="line">    <span class="keyword">while</span>(writingWriters &gt; <span class="number">0</span> || (preferWriter &amp;&amp; waitingWriters &gt; <span class="number">0</span>))&#123;</span><br><span class="line">      wait();</span><br><span class="line">    &#125;</span><br><span class="line">    readingReaders++;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">readUnLock</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException&#123;</span><br><span class="line">    readingReaders--;</span><br><span class="line">    preferWriter = <span class="literal">true</span>;</span><br><span class="line">    notifyAll();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">writeLock</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException&#123;</span><br><span class="line">    waitingWriters++;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="keyword">while</span>(readingReaders &gt; <span class="number">0</span> || writingWriters &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        wait();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">      waitingWriters--;</span><br><span class="line">    &#125;</span><br><span class="line">    writingWriters++;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">writeUnLock</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException&#123;</span><br><span class="line">    writingWriters--;</span><br><span class="line">    preferWriter = <span class="literal">false</span>;</span><br><span class="line">    notifyAll();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>JUC-ReadWriteLock</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReadWriteLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantReadWriteLock</span>(<span class="literal">true</span>);</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Lock</span> <span class="variable">readLock</span> <span class="operator">=</span> lock.readLock();</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Lock</span> <span class="variable">writeLock</span> <span class="operator">=</span> lock.writeLock();</span><br></pre></td></tr></table></figure>

<p><code>ReentrantReadWriteLock</code>ä¸»è¦ç‰¹å¾ï¼š</p>
<ul>
<li><p><strong>å…¬å¹³æ€§</strong>	</p>
<p>è®©ç­‰å¾…æ—¶é—´ä¹…çš„çº¿ç¨‹ä¼˜å…ˆè·å¾—é”</p>
</li>
<li><p><strong>å¯é‡å…¥æ€§</strong>	</p>
<p><code>Reader</code>è§’è‰²çš„çº¿ç¨‹å¯ä»¥è·å¾—â€œç”¨äºå†™å…¥çš„é”â€ï¼Œ<code>Writer</code>å¯è·å¾—â€œç”¨äºè¯»å–çš„é”â€</p>
</li>
<li><p><strong>é”é™çº§</strong></p>
</li>
</ul>
<br/>

<p><strong>è¯¾åä¹ é¢˜ï¼š</strong></p>
<ol>
<li><p><code>waitingWriters</code>å’Œ<code>preferWriters</code>å­—æ®µçš„å«ä¹‰ï¼š</p>
<p>é˜²æ­¢<code>ReaderThread</code>æˆ–è€…<code>WriterThread</code>ä¸ä¼š**â€œé¥¿æ­»â€**ï¼š<code>waitingWriters &gt; 0</code>å¯ä»¥è®©<code>ReaderThread</code>çº¿ç¨‹ç­‰å¾…ï¼Œé˜²æ­¢<code>WriterThread</code>é¥¿æ­»ï¼›å†åŠ ä¸Š<code>preferWriters</code>æ§åˆ¶ä¸¤ç±»è¿›ç¨‹å“ªä¸€ç±»æ›´ä¼˜å…ˆï¼Œé˜²æ­¢<code>ReaderThread</code>é¥¿æ­»</p>
</li>
</ol>
<br/>

<h3 id="VII-Thread-Per-Message"><a href="#VII-Thread-Per-Message" class="headerlink" title="VII.Thread-Per-Message"></a>VII.Thread-Per-Message</h3><p>è¯¥æ¨¡å¼æ˜¯ä¸ºæ¯ä¸ªå‘½ä»¤æˆ–è¯·æ±‚<strong>æ–°åˆ†é…ä¸€ä¸ªçº¿ç¨‹</strong>ï¼Œç”±è¿™ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œå…·ä½“å¤„ç†ï¼Œå®ç°<strong>è°ƒç”¨ä¸æ‰§è¡Œç›¸åˆ†ç¦»</strong>ã€‚</p>
<p>ç›®çš„åœ¨äºæé«˜ç¨‹åºå“åº”æ€§ï¼Œæ˜¯å¦é€‰ç”¨å–å†³äº<strong>çº¿ç¨‹å¯åŠ¨è€—æ—¶</strong>ä¸<strong>å…·ä½“æ“ä½œè€—æ—¶</strong>é—´çš„å‡è¡¡</p>
<blockquote>
<p>JUC-Executor</p>
</blockquote>
<img src="/Blog/img/6453e32b98ce084a632551d3ff5ac185.jpg" alt="æ‰«æä»¶_Creates interface.jpg" style="zoom:20%;" />

<ul>
<li><code>ThreadFactory</code> å°†çº¿ç¨‹åˆ›å»ºæŠ½è±¡åŒ–ï¼Œ<code>Executor</code> å°†çº¿ç¨‹æ‰§è¡ŒæŠ½è±¡åŒ–</li>
<li><code>ExecutorService</code> å°†<strong>è¢«å¤ç”¨</strong>çš„çº¿ç¨‹æŠ½è±¡åŒ–ï¼ˆæ‰€è°“æŠ½è±¡åŒ–ï¼Œå°±æ˜¯å¯¹å¤–éšè—äº†å®ç°ç»†èŠ‚ï¼‰</li>
<li><code>cheduleExecutorService</code> å°†è¢«è°ƒåº¦çš„çº¿ç¨‹çš„æ‰§è¡ŒæŠ½è±¡åŒ–</li>
</ul>
<p><strong>ï¼è¯¾åä¹ é¢˜ 7-5ã€7-7</strong></p>
<br/>

<h3 id="VIII-Worker-Thread-Thread-Pool"><a href="#VIII-Worker-Thread-Thread-Pool" class="headerlink" title="VIII.Worker Thread&#x2F;Thread Pool"></a>VIII.Worker Thread&#x2F;Thread Pool</h3><p>è¯¥æ¨¡å¼ç±»ä¼¼äº<code>Thread-Per-Message</code>å’Œ<code>Produce-Consumer</code>æ¨¡å¼çš„ç»“åˆã€‚å¯¹äºå‰è€…ï¼Œä¼˜åŠ¿åœ¨äºæ–°çº¿ç¨‹æ˜¯äº‹å…ˆå¯åŠ¨çš„(å­˜åœ¨äº<strong>çº¿ç¨‹æ± </strong>ä¸­)ï¼Œæ•…è€Œå¯ä»¥<strong>èŠ‚çœçº¿ç¨‹å¯åŠ¨æ—¶é—´</strong>ï¼›å¯¹äºåè€…ï¼Œå¼•å…¥çš„çº¿ç¨‹æ± å°±ç›¸å½“äº<code>Consumer</code>è§’è‰²å·¥ä½œçš„ç¯å¢ƒï¼Œé‡Œé¢æœ‰<code>Channel</code>è§’è‰²å’Œ<code>Consumer</code>è§’è‰²</p>
<blockquote>
<p>Runnableçš„æ„ä¹‰</p>
</blockquote>
<p>Runnableå¯¹è±¡å¯ä»¥ä½œä¸ºæ–¹æ³•å‚æ•°ä¼ é€’ï¼Œå¯ä»¥æ”¾å…¥é˜Ÿåˆ—ï¼Œå¯ä»¥è·¨è¶Šç½‘ç»œä¼ é€’ï¼Œä¹Ÿå¯ä»¥è¢«ä¿å­˜è‡³æ–‡ä»¶ä¸­ã€‚æ•…è€Œæˆ‘ä»¬å¯ä»¥å°†å…¶çœ‹ä½œ<code>Command</code>æ¨¡å¼ä¸‹çš„<code>Command</code>è§’è‰²</p>
<p><strong>!è¯¾åä¹ é¢˜8-5ã€8-6</strong></p>
<br/>

<h3 id="IX-Future"><a href="#IX-Future" class="headerlink" title="IX.Future"></a>IX.Future</h3><p><code>Thread-Per-Message</code>å°†è€—è´¹æ—¶é—´çš„å¤„ç†äº¤ç»™å…¶ä»–çº¿ç¨‹ï¼Œå¯æé«˜å“åº”æ€§ã€‚ä½†æ˜¯åœ¨å°†å¤„ç†è½¬äº¤å‡ºå»çš„æ—¶å€™ï¼Œå¤„ç†ç»“æœä»ç„¶æœªçŸ¥ï¼Œè€Œç­‰å¾…å¤„ç†ç»“æœçš„è¯ç¨‹åºå“åº”æ€§ä¼šé™ä½</p>
<p><code>Future</code>æ„ä¹‰ä¾¿åœ¨äºï¼Œå¯ä»¥**åœ¨ä¸ç”¨é™ä½å“åº”æ€§çš„å‰æä¸‹è·å–ç»“æœï¼Œ**åšåˆ°â€œå‡†å¤‡è¿”å›å€¼â€å’Œâ€œä½¿ç”¨è¿”å›å€¼â€ç›¸åˆ†ç¦»</p>
<blockquote>
<p>Futureè§’è‰²çš„å˜ç§</p>
</blockquote>
<ul>
<li><strong>ä¸è®©ä¸»çº¿ç¨‹ä¹…ç­‰</strong>ã€‚è‹¥<code>RealData</code>çš„å®ä¾‹è¿˜æœªå‡†å¤‡å¥½ï¼Œä¸»çº¿ç¨‹è°ƒç”¨<code>getContent</code>æ–¹æ³•æ—¶ä¼šè¿›è¡Œç­‰å¾…(<code>Guarded Suspension</code>)ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>Balking</code>ï¼Œç„¶åç¨å¾®æ‰§è¡Œäº›å…¶ä»–æ“ä½œå†å»è°ƒç”¨<code>getContent</code></li>
<li>**ä¼šå‘ç”Ÿå˜åŒ–ã€‚**é€šå¸¸æƒ…å†µä¸‹ï¼Œâ€œè¿”å›å€¼â€ä»…ä¼šè¢«è®¾ç½®åˆ°Futureè§’è‰²ä¸­ä¸€æ¬¡ï¼Œå³Futureè§’è‰²çš„çŠ¶æ€åªä¼šæ”¹å˜ä¸€æ¬¡ã€‚ä½†æœ‰æ—¶ä¹Ÿä¼šæœ‰ç»™Futureè§’è‰²è®¾ç½®â€œå½“å‰è¿”å›å€¼â€çš„éœ€æ±‚ï¼Œè¿™æ˜¯æˆ‘ä»¬å¯ä»¥è€ƒè™‘åå¤è®¾ç½®â€œè¿”å›å€¼â€ã€‚</li>
</ul>
<blockquote>
<p>JUC-Futureï¼ˆä»£ç è§VScodeï¼‰</p>
</blockquote>
<p><img src="/Blog/img/ae6fd5b57d3126d5e5cc12aaa63267f1.png" alt="screen-capture"></p>
<br/>

<h3 id="X-Two-Phase-Termination"><a href="#X-Two-Phase-Termination" class="headerlink" title="X.Two-Phase Termination"></a>X.Two-Phase Termination</h3><p>è¯¥æ¨¡å¼å¯ä»¥åšåˆ°â€ä¼˜é›…åœ°ç»“æŸçº¿ç¨‹â€ï¼Œå…¶è¦ç‚¹åœ¨äºï¼šå®‰å…¨åœ°ç»ˆæ­¢çº¿ç¨‹**ï¼ˆå®‰å…¨æ€§ï¼‰<strong>ã€å¿…å®šè¿›è¡Œç»ˆæ­¢å¤„ç†</strong>ï¼ˆç”Ÿå­˜æ€§ï¼‰<strong>ã€å‘å‡ºç»ˆæ­¢è¯·æ±‚åå°½å¿«æ‰§è¡Œç»ˆæ­¢å¤„ç†</strong>ï¼ˆå“åº”æ€§ï¼‰**</p>
<blockquote>
<p>ç»ˆæ­¢å¤„ç†</p>
</blockquote>
<ul>
<li><p>æœªæ•è·çš„å¼‚å¸¸å¤„ç†å™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Thread.setDefaultUncaughtExceptionHandler(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Thread</span>.UncaughtExceptionHandler()&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">uncaughtException</span><span class="params">(Thread thread, Throwable e)</span>&#123;</span><br><span class="line">      <span class="comment">//æ‰§è¡Œæœªæ•è·å¼‚å¸¸çš„å¤„ç†</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>é€€å‡ºé’©å­</p>
<p><strong>æŒ‡javaè™šæ‹Ÿæœºé€€å‡ºæ—¶å¯åŠ¨çš„çº¿ç¨‹ï¼Œä½¿ç”¨å…¶æ¥ç¼–å†™ç¨‹åºå®Œå…¨ç»ˆæ­¢æ—¶çš„ç»ˆæ­¢å¤„ç†</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Runtime.getRuntime().addShutdownHook(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Thread</span>()&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="comment">//ç»ˆæ­¢å¤„ç†</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>JUC-CountDownLatch</p>
</blockquote>
<p>å®ç°â€ç­‰å¾…<strong>æŒ‡å®šæ¬¡æ•°</strong>çš„<code>CountDown</code>æ–¹æ³•è¢«è°ƒç”¨â€è¿™ä¸€åŠŸèƒ½</p>
<blockquote>
<p>JUC-CyclicBarrier</p>
</blockquote>
<p><code>CountDownLatch</code>åªèƒ½è¿›è¡Œå€’æ•°è®¡æ•°ï¼Œè€Œ<code>CyclicBarrier</code>å¯ä»¥<strong>å‘¨æœŸæ€§</strong>çš„åˆ›å»ºå±éšœï¼Œç¢°åˆ°å±éšœçš„çº¿ç¨‹æ˜¯æ— æ³•ç»§ç»­å‰è¿›çš„ã€‚å±éšœçš„è§£é™¤æ¡ä»¶æ˜¯**åˆ°è¾¾å±éšœå¤„çš„çº¿ç¨‹ä¸ªæ•°è¾¾åˆ°äº†æŒ‡å®šä¸ªæ•°ï¼Œ**è¿™æ ·å±éšœè§£é™¤ï¼Œè¿™ç°‡çº¿ç¨‹ä¾¿ä¼šä¸€èµ·â€œå†²å‡ºå»â€</p>
</div><script type="text/javascript" src="/Blog/js/share.js?v=1.0.0" async></script><a class="article-share-link" data-url="https://luozero-world.github.io/Blog/2024/05/23/java-duo-xian-cheng-she-ji-mo-shi/" data-id="cmbgnalee0002iol740f2dcev" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACnUlEQVR42u3aQY4CMQwEQP7/aVbaK2ho2/HAoTghGIVUDklo+/GIX8//1+v75Nt85NfPJyM/8PDw8NZ4z8tXMonraV3/1mQ+18/g4eHhbfOSw+B6oN7nvQMpX248PDy87/KSrT+/didjzg8qPDw8vO/yepv+9eTmI+Dh4eF9i3fsz/8gWc2fWcla8PDw8E7OJwoF7nx/U30PDw8Pr1hqSjbuSbE/jx6as8XDw8Nb4CWRaxUw3/rzhYuWEg8PD2+Zlxe65pfgSQBRaErAw8PDW+D1LsS9i3XeFDspm+Hh4eHt8SatTtXtOyrzD5JYPDw8vHt41atqtRA1aXittmQVhsDDw8Mb8BJGtZ00b42qRhjVaAMPDw9vg5dv03npazvUKIcUeHh4eAu8XpE+39YnF+je0o9+AA8PD6+4W1abU/PItRdeHFhKPDw8vKO8ZgNTK4BIAo5qdBsdCXh4eHjLvOrWny9Wj1SNMPDw8PC2eXmZfz6VaqGrGhN/GBkPDw/vEC+/ClfLVPP2ggOLgoeHh7fGq264kyerTQbVmOPNwYCHh4e3zOu1QOVTqU5x1OaFh4eHt8abx7v558nluHoIRa0DeHh4eAu8+RW5Ckt4+VX7zZN4eHh4t/PmTQCTxqxqUa1Z08PDw8Mb8JJCVw+Qj5+MXDhI8PDw8BZ41an0Svi9uPZUSxYeHh7eWd6kHNUrU52Ka6NjDA8PD+9GXu+6fCqczSOMD+EFHh4e3gKvGpX2MPlF/Ox7PDw8vD3epJG0etXuxRn55RsPDw/vTl6yWVej21NT7x1deHh4eL/Aq27Qk0WZhBp4eHh4v8arbujVJqp8zOjgwcPDw1vjVYtep9oOJmEuHh4e3rd4k7/61Wv0JLw43C6Ah4eH1+H9AYGSc6husQpiAAAAAElFTkSuQmCC">åˆ†äº«</a><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/Blog/tags/JUC/" rel="tag">JUC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/Blog/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">å¤šçº¿ç¨‹</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/Blog/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">è®¾è®¡æ¨¡å¼</a></li></ul></div><div class="post-nav"><a class="pre" href="/Blog/2024/06/12/yin-le-tui-jian-xi-tong/">éŸ³ä¹æ¨èç³»ç»Ÿ</a><a class="next" href="/Blog/2023/12/28/2023-zhe-yi-nian/">2023è¿™ä¸€å¹´</a></div><div class="nofancybox" id="waline"></div><link rel="stylesheet" type="text/css" href="https://unpkg.com/@waline/client@v3/dist/waline.css"><script type="module">import {init} from 'https://unpkg.com/@waline/client@v3/dist/waline.js';
init({
  el: '#waline',
  comment: true,
  serverURL: 'waline-sigma.vercel.app',
  pageSize: '10',
  wordLimit: '500',
  requiredMeta,
  emoji: [
    '//unpkg.com/@waline/emojis@1.2.0/weibo',
    '//unpkg.com/@waline/emojis@1.2.0/qq',
    '//unpkg.com/@waline/emojis@1.2.0/tw-emoji',
  ],
});</script><script>let metaInfo = ['nick', 'mail', 'link']
let requiredMeta = 'nick,mail'.split(',').filter(item => {
  return metaInfo.indexOf(item) > -1
})
</script></div><aside class="toc-article" id="toc"><div class="toc-title">æ–‡ç« ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%AF%84%E4%BB%B7%E6%A0%87%E5%87%86"><span class="toc-text">å¤šçº¿ç¨‹è¯„ä»·æ ‡å‡†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#I-Single-Threaded-Execution%E6%A8%A1%E5%BC%8F"><span class="toc-text">I.Single Threaded Executionæ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#II-Immutable"><span class="toc-text">II.Immutable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#III-Guarded-Suspension"><span class="toc-text">III.Guarded Suspension</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IV-Balking"><span class="toc-text">IV.Balking</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#V-Producer-Consumer"><span class="toc-text">V.Producer-Consumer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VI-Read-Write-Lock"><span class="toc-text">VI.Read-Write Lock</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VII-Thread-Per-Message"><span class="toc-text">VII.Thread-Per-Message</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VIII-Worker-Thread-Thread-Pool"><span class="toc-text">VIII.Worker Thread&#x2F;Thread Pool</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IX-Future"><span class="toc-text">IX.Future</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#X-Two-Phase-Termination"><span class="toc-text">X.Two-Phase Termination</span></a></li></ol></aside></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="å…³äº"><img class="nofancybox" src="/Blog/img/myphoto.jpg"/></a><p>Premature optimization is the root of all evil.</p><a class="info-icon" href="mailto:13097638440@163.com" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/LuoZero-World" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://space.bilibili.com/649588534" title="Bilibili" target="_blank" style="margin-inline:5px"> <i class="fa fa-reddit-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/Blog/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">æŠ€æœ¯æ€»ç»“</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/Blog/categories/%E9%9A%8F%E7%AC%94/">éšç¬”</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/Blog/categories/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/">é¡¹ç›®æ€»ç»“</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/Blog/tags/2023/" style="font-size: 15px;">2023</a> <a href="/Blog/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 15px;">å¤šçº¿ç¨‹</a> <a href="/Blog/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 15px;">è®¾è®¡æ¨¡å¼</a> <a href="/Blog/tags/JUC/" style="font-size: 15px;">JUC</a> <a href="/Blog/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 15px;">åˆ†å¸ƒå¼</a> <a href="/Blog/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 15px;">åŸºç¡€çŸ¥è¯†</a> <a href="/Blog/tags/2024/" style="font-size: 15px;">2024</a> <a href="/Blog/tags/%E7%AE%97%E6%B3%95/" style="font-size: 15px;">ç®—æ³•</a> <a href="/Blog/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 15px;">åŠ¨æ€è§„åˆ’</a> <a href="/Blog/tags/%E5%9B%BE%E8%AE%BA/" style="font-size: 15px;">å›¾è®º</a> <a href="/Blog/tags/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/" style="font-size: 15px;">æ¨èç³»ç»Ÿ</a> <a href="/Blog/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/Blog/tags/Nginx/" style="font-size: 15px;">Nginx</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/Blog/2025/05/15/fen-bu-shi-suo-zhu-dong-lun-xun-xing-vs-jian-ting-xing/">åˆ†å¸ƒå¼é”ï¼šä¸»åŠ¨è½®è¯¢å‹vsç›‘å¬å›è°ƒå‹</a></li><li class="post-list-item"><a class="post-list-link" href="/Blog/2025/02/23/suan-fa-mo-ban/">ç®—æ³•æ¨¡æ¿</a></li><li class="post-list-item"><a class="post-list-link" href="/Blog/2025/01/12/hu-lun-tun-zao-yu-hou-ji/">å›«å›µåæ£ä¸2024åè®°</a></li><li class="post-list-item"><a class="post-list-link" href="/Blog/2024/06/12/yin-le-tui-jian-xi-tong/">éŸ³ä¹æ¨èç³»ç»Ÿ</a></li><li class="post-list-item"><a class="post-list-link" href="/Blog/2024/05/23/java-duo-xian-cheng-she-ji-mo-shi/">Javaå¤šçº¿ç¨‹è®¾è®¡æ¨¡å¼</a></li><li class="post-list-item"><a class="post-list-link" href="/Blog/2023/12/28/2023-zhe-yi-nian/">2023è¿™ä¸€å¹´</a></li><li class="post-list-item"><a class="post-list-link" href="/Blog/2023/10/07/java-he-xin-ji-zhu/">Javaæ ¸å¿ƒæŠ€æœ¯I (Version.12)</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="https://chuixue-lan.github.io/Blog/" title="å¹é›ªã®åšå®¢" target="_blank">å¹é›ªã®åšå®¢</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2025 <a href="/Blog/." rel="nofollow">LuoZero's World.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/Blog/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/Blog/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/Blog/css/search.css?v=1.0.0"><script type="text/javascript" src="/Blog/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/Blog/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/Blog/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸï¼"></script><link rel="stylesheet" type="text/css" href="/Blog/css/copycode.css?v=1.0.0"><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script type="text/javascript" src="/Blog/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/Blog/js/smartresize.js?v=1.0.0"></script></div></body></html>